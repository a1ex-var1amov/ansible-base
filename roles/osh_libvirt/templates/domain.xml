<domain type='kvm'>
  <name>{{ hostvars[item].ansible_ssh_host }}</name>
  <memory unit='KiB'>{{ virtual_machines[item].memory_kb }}</memory>
  <vcpu>{{ virtual_machines[item].vcpu }}</vcpu>
  <os>
    <type>hvm</type>
  </os>
  <features>
    <acpi/>
    <apic/>
  </features>
  <clock offset="utc">
    <timer name="pit" tickpolicy="delay"/>
    <timer name="rtc" tickpolicy="catchup"/>
    <timer name="hpet" present="no"/>
  </clock>
  <devices>
    <disk type='file' device='disk'>
      <driver name='qemu' type='qcow2'/>
      <source file='{{ virtual_machines_dir }}/{{ hostvars[item].ansible_ssh_host }}.qcow2'/>
      <target bus="virtio" dev="vda"/>
    </disk>
    <disk type='file' device='cdrom'>
      <driver name='qemu' type='raw'/>
      <target dev='hda' bus='ide'/>
    </disk>
    <interface type='network'>
      <mac address='{{ virtual_machines[item].mac }}'/>
      <source network='{{ virtual_machines[item].network }}'/>
      <model type='virtio'/>
    </interface>
    <input type='mouse' bus='ps2'/>
    <input type='keyboard' bus='ps2'/>
<!--
    <serial type="file">
      <source path="/home/anosek/qemu/vms/PLACEHOLDER1.console.log"/>
    </serial>
-->
    <serial type="pty"/>
    <graphics type="vnc" autoport="yes" keymap="en-us" listen="127.0.0.1"/>
    <video>
      <model type="cirrus"/>
    </video>
  </devices>
</domain>
